<!DOCTYPE html>
<html lang="el"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Meta tags για CSRF (θα αντικατασταθούν από το Thymeleaf) -->
  <meta name="_csrf" th:content="${_csrf.token}"/>
  <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
  <title>ΟΠΑ - ERASMUS</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600&display=swap" rel="stylesheet">
  <!-- Εξωτερικό αρχείο CSS (styles.css πρέπει να βρίσκεται στο src/main/resources/static/css) -->
  <link rel="stylesheet" th:href="@{/css/styles.css}">

  <style>
    /* Εξτρά Στυλ για τον τίτλο ώστε να είναι πιο εμφανίσιμος */
    .header-title {
      font-size: 64px;                
      font-weight: bold;
      color: #fff;
      text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.7);
      animation: fadeInZoom 1.5s ease-out;
      transition: transform 0.3s ease;
    }
    .header-title:hover {
      transform: scale(1.05);
    }
    @keyframes fadeInZoom {
      0% { opacity: 0; transform: scale(0.8); }
      100% { opacity: 1; transform: scale(1); }
    }
    
    /* ========== Βασικό Styling ========== */
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #ece9e6, #ffffff);
      color: #333;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      line-height: 1.6;
      transition: background 0.5s ease;
    }
    header {
      background: linear-gradient(135deg, #003366, #00509e);
      color: #fff;
      padding: 25px 15px;
      text-align: center;
      font-size: 36px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      letter-spacing: 1px;
      position: relative;
    }
    .auth-links {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 16px;
    }
    .auth-links a {
      color: #fff;
      text-decoration: none;
      margin-right: 10px;
    }
    .profile-info {
      position: absolute;
      top: 25px;
      left: 25px;
      font-size: 16px;
    }
    .profile-info a {
      color: #fff;
      text-decoration: none;
    }
    nav {
      background-color: #00509e;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 12px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.2);
    }
    .nav-item {
      color: #fff;
      text-decoration: none;
      padding: 12px 24px;
      margin: 0 10px;
      font-size: 18px;
      border-radius: 30px;
      transition: background-color 0.3s ease, transform 0.3s ease;
    }
    .nav-item:hover {
      background-color: #0073e6;
      transform: scale(1.05);
    }
    .dropdown {
      position: relative;
      display: inline-block;
    }
    .dropdown-content {
      display: none;
      position: absolute;
      background-color: #fff;
      min-width: 260px;
      box-shadow: 0 6px 12px rgba(0,0,0,0.2);
      z-index: 1;
      left: 0;
      top: 100%;
      border-radius: 6px;
      overflow: hidden;
      animation: fadeIn 0.3s ease;
    }
    .dropdown-content a {
      color: #003366;
      padding: 14px 20px;
      display: block;
      text-decoration: none;
      transition: background-color 0.3s ease;
    }
    .dropdown-content a:hover {
      background-color: #eaf2ff;
    }
    .dropdown:hover .dropdown-content {
      display: block;
    }
    .container {
      width: 90%;
      max-width: 1200px;
      margin: 40px auto;
      padding: 40px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.15);
      animation: fadeIn 0.5s ease;
    }
    .select-container {
      text-align: center;
      margin-bottom: 25px;
    }
    select, textarea, button {
      font-family: inherit;
    }
    select {
      padding: 12px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 6px;
      outline: none;
      transition: border-color 0.3s ease;
      max-width: 100%;
    }
    select:focus { border-color: #00509e; }
    textarea {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 6px;
      resize: vertical;
      outline: none;
      transition: border-color 0.3s ease;
    }
    textarea:focus { border-color: #00509e; }
    button {
      padding: 12px 24px;
      font-size: 16px;
      border: none;
      border-radius: 25px;
      background-color: #00509e;
      color: #fff;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.3s ease;
      margin: 10px 5px;
    }
    button:hover { background-color: #0073e6; transform: scale(1.02); }
    .button-container {
      display: flex;       /* Flex layout για οριζόντια στοίχιση */
      flex-direction: row; /* Από προεπιλογή είναι row, αλλά το γράφουμε για σαφήνεια */
      gap: 20px;           /* Απόσταση (κενό) ανάμεσα στα κουμπιά */
    }

    /* Κουμπιά με ίδιες διαστάσεις και στοίχιση του κειμένου αριστερά */
    .custom-button {
      display: flex;
      justify-content: flex-start; /* Στοίχιση προς τα αριστερά */
      align-items: center;
      width: 350px;    /* Σταθερό πλάτος */
      height: 250px;   /* Σταθερό ύψος */
      padding-left: 20px; /* Λίγο κενό αριστερά */
      background: linear-gradient(135deg, #d2d2d3, #f5f3f348);
      border: 1px solid #fcfcfcaf;
      border-radius: 40px;
      color: #1747ca;
      font-weight: bold;
      font-size: 30px;
      cursor: pointer;
      text-decoration: none;
      margin-top: 20px;
      transition: box-shadow 0.2s ease, transform 0.2s ease;
      white-space: normal;
      word-wrap: break-word;
    }

    .custom-button:hover {
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      transform: translateY(-2px);
    }


    .custom-button:hover {
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      transform: translateY(-2px);
    }
    .table-container {
      margin-top: 25px;
      animation: fadeIn 0.5s ease;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 14px;
      text-align: left;
    }
    th { background-color: #00509e; color: #fff; }
    .comment-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        margin-top: 20px;
        font-family: 'Poppins', sans-serif;
        border-radius: 15px;
        overflow: hidden;
    }
    .comment-table th {
        background-color: #00509e;
        color: #fff;
        padding: 14px;
        text-align: left;
        font-size: 18px;
    }
    .comment-table td {
        border: 1px solid #ddd;
        padding: 14px;
        font-size: 16px;
    }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    /* Modal Styling */
    #forumModal, #forumModalOverlay, #experienceModal, #experienceModalOverlay,
    #infoModal, #infoModalOverlay, #profileModal, #profileModalOverlay {
      transition: opacity 0.3s ease;
    }

    /* ================== MODALS ================== */
    #forumModal, #experienceModal, #infoModal, #profileModal, #uploadPhotoModal {
      position: fixed;
      top: 50%;
      left: 50%;
      /* Αρχικά μικρότερη κλίμακα και αόρατο */
      transform: translate(-50%, -50%) scale(0.9);
      opacity: 0;

      /* Βασικά χαρακτηριστικά εμφάνισης */
      background: #fff;
      padding: 30px;
      border-radius: 16px; /* Πιο έντονο «στρογγύλεμα» */
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      z-index: 1000;
      width: 90%;
      max-width: 500px;
      display: none; /* Εξαρχής κρυμμένο */

      /* Για να δώσουμε ένα ομαλό fade+scale */
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    /* ================== OVERLAYS ================== */
    #forumModalOverlay, #experienceModalOverlay, #infoModalOverlay, 
    #profileModalOverlay, #uploadPhotoModalOverlay {
      position: fixed;
      top: 0; 
      left: 0;
      width: 100%; 
      height: 100%;
      /* Ελαφρύ σκούρο φόντο + blur */
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(4px);
      z-index: 999;
      display: none; /* Εξαρχής κρυμμένο */
      opacity: 0;
      transition: opacity 0.3s ease-out;
    }

    /* ================== CLASS ΓΙΑ ΝΑ ΕΜΦΑΝΙΣΤΟΥΝ ================== */
    /* Μπορείς να προσθέτεις μια κλάση π.χ. .show για να εμφανίζονται με animation */
    .show-modal {
      display: block;
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
    .show-overlay {
      display: block;
      opacity: 1;
    }


    #forumModalOverlay, #experienceModalOverlay, #infoModalOverlay, #profileModalOverlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
      display: none;
    }
    #forumModal, #experienceModal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
      z-index: 1000;
      width: 90%;
      max-width: 500px;
      display: none;
    }
    #infoModal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
      z-index: 1100;
      width: 90%;
      max-width: 600px;
      display: none;
    }
    #profileModal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
      z-index: 1150;
      width: 90%;
      max-width: 500px;
      display: none;
    }
    /* Sidebar Styling */
    .sidebar {
      height: 100%;
      width: 0;
      position: fixed;
      top: 0;
      right: 0;
      background-color: #f9f9f9;
      box-shadow: -3px 0 10px rgba(0,0,0,0.2);
      overflow-x: hidden;
      transition: 0.3s;
      padding-top: 60px;
      z-index: 999;
    }
    .sidebar.open { width: 320px; }
    .closebtn {
      position: absolute;
      top: 20px;
      right: 25px;
      font-size: 36px;
      text-decoration: none;
      color: #333;
      cursor: pointer;
    }
    .openbtn {
      position: fixed;
      top: 355px;
      right: 25px;
      background: linear-gradient(135deg, #003366, #00509e);
      color: #fff;
      padding: 10px 16px;
      font-size: 25px;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      z-index: 800;
    }
    .openbtn:hover { background-color: #0073e6; }
    .calendar-container { text-align: center; padding: 20px; }
    .calendar-title { font-size: 24px; margin-bottom: 10px; color: #003366; }
    table.calendar {
      margin: 0 auto;
      border-collapse: collapse;
      width: 90%;
      max-width: 250px;
    }
    table.calendar th {
      background-color: #0073e6;
      color: #fff;
      padding: 5px;
      text-align: center;
    }
    table.calendar td {
      border: 1px solid #ddd;
      text-align: center;
      padding: 8px;
      cursor: pointer;
    }
    table.calendar td:hover { background-color: #f0f0f0; }
    footer {
      text-align: center;
      padding: 20px 0;
      background: #003366;
      color: #fff;
      margin-top: auto;
      font-size: 16px;
    }
    /* Like Button Styling */
    .like-button {
      width: 40px;
      height: 40px;
      border: none;
      cursor: pointer;
      outline: none;
      background: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMi43NiAzLjM2Yy0xLjYxLTEuMzItNC4xLTEuMi01LjY0LjI3LTEuNjUgMS41Ny0xLjggNC4xLS4zIDUuODhsNS4xOCA1LjY3IDUuMTgtNS42N2MxLjUtMS43OCAxLjM1LTQuMzEtLjMtNS44OC0xLjU0LTEuNDctNC4wMy0xLjU5LTUuNjQuMjd6Ii8+PC9zdmc+") center center / contain no-repeat;
    }
    .like-button.liked {
      background: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIj48cGF0aCBmaWxsPSJyZWQiIHN0cm9rZT0icmVkIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMi43NiAzLjM2Yy0xLjYxLTEuMzItNC4xLTEuMi01LjY0LjI3LTEuNjUgMS41Ny0xLjggNC4xLS4zIDUuODhsNS4xOCA1LjY3IDUuMTgtNS42N2MxLjUtMS43OCAxLjM1LTQuMzEtLjMtNS44OC0xLjU0LTEuNDctNC4wMy0xLjU5LTUuNjQuMjd6Ii8+PC9zdmc+") center center / contain no-repeat;
    }
  </style>
</head>
<body onload="showHome()">
  <header>
    <!-- Αν δεν είναι συνδεδεμένος ο χρήστης -->
    <div class="auth-links" sec:authorize="!isAuthenticated()">
      <a th:href="@{/login}">Log In</a>
      <a th:href="@{/register}">Sign In</a>
    </div>
    <!-- Εάν είναι συνδεδεμένος ο χρήστης, εμφανίζεται το εμφανιζόμενο όνομα (πάνω αριστερά πλέον) -->
    <div class="profile-info" sec:authorize="isAuthenticated()">
      <a href="#" style="color: #fff; text-decoration: none;" onclick="openProfileModal(); return false;">
        <span sec:authentication="principal.username">Χρήστης</span>
      </a>    
    </div>
    <!-- Ο τίτλος με την προσθήκη της κλάσης header-title για πιο εμφανή styling -->
    <h1 class="header-title">Eropa</h1>
    <!-- Κουμπί sidebar (fixed, ίδιο background με header) -->
    <button class="openbtn" onclick="toggleSidebar()">☰</button>
  </header>

  <nav>
    <a href="#" class="nav-item" onclick="showHome()">ΑΡΧΙΚΗ</a>
    <div class="dropdown">
      <a href="#" class="nav-item">ΤΜΗΜΑΤΑ</a>
      <div class="dropdown-content">
        <a href="#" onclick="showDepartment('Οικονομικής Επιστήμης')">Οικονομικής Επιστήμης</a>
        <a href="#" onclick="showDepartment('Διεθνών και Ευρωπαϊκών Οικονομικών Σπουδών')">Διεθνών και Ευρωπαϊκών Οικονομικών Σπουδών</a>
        <a href="#" onclick="showDepartment('Διοικητικής Επιστήμης και Τεχνολογίας')">Διοικητικής Επιστήμης και Τεχνολογίας</a>
        <a href="#" onclick="showDepartment('Οργάνωσης και Διοίκησης Επιχειρήσεων')">Οργάνωσης και Διοίκησης Επιχειρήσεων</a>
        <a href="#" onclick="showDepartment('Μάρκετινγκ και Επικοινωνίας')">Μάρκετινγκ και Επικοινωνίας</a>
        <a href="#" onclick="showDepartment('Στατιστικής')">Στατιστικής</a>
        <a href="#" onclick="showDepartment('Πληροφορικής')">Πληροφορικής</a>
      </div>
    </div>
    <!-- Νέο link "ERASMUS FORUM" που φορτώνει τη σελίδα του forum στο container -->
    <a href="#" class="nav-item" onclick="showForum()">ERASMUS FORUM</a>
    <a href="#" class="nav-item" onclick="showApplication()">ΑΙΤΗΣΕΙΣ</a>
  </nav>

  <!-- Κεντρικό container για δυναμικό περιεχόμενο -->
  <div class="container" id="content"></div>

  <!-- Forum Modal για "Πες μας για το Πανεπιστήμιο που πήγες" -->
  <div id="forumModalOverlay" onclick="closeForumModal()"></div>
  <div id="forumModal">
    <h2>Πες μας για το Πανεπιστήμιο που πήγες</h2>
    <form id="forumForm">
      <label for="forumDepartment">Τμήμα:</label>
      <select id="forumDepartment" onchange="fetchForumUniversities(this.value)">
        <option value="">Επιλέξτε Τμήμα</option>
        <option value="Οικονομικής Επιστήμης">Οικονομικής Επιστήμης</option>
        <option value="Διεθνών και Ευρωπαϊκών Οικονομικών Σπουδών">Διεθνών και Ευρωπαϊκών Οικονομικών Σπουδών</option>
        <option value="Διοικητικής Επιστήμης και Τεχνολογίας">Διοικητικής Επιστήμης και Τεχνολογίας</option>
        <option value="Οργάνωσης και Διοίκησης Επιχειρήσεων">Οργάνωσης και Διοίκησης Επιχειρήσεων</option>
        <option value="Μάρκετινγκ και Επικοινωνίας">Μάρκετινγκ και Επικοινωνίας</option>
        <option value="Στατιστικής">Στατιστικής</option>
        <option value="Πληροφορικής">Πληροφορικής</option>
      </select>
      <br><br>
      <label for="forumCountry">Χώρα:</label>
      <select id="forumCountry" onchange="populateForumUniversities(this.value)">
        <option value="">Επιλέξτε Χώρα</option>
      </select>
      <br><br>
      <label for="forumUniversity">Συνεργαζόμενο Πανεπιστήμιο:</label>
      <select id="forumUniversity">
        <option value="">Επιλέξτε Πανεπιστήμιο</option>
      </select>
      <br><br>
      <label for="forumExperience">Εμπειρία:</label>
      <textarea id="forumExperience" rows="5" placeholder="Γράψτε λίγα λόγια για την εμπειρία σας..."></textarea>
      <br><br>
      <button type="button" onclick="submitForumPost()">Υποβολή</button>
      <button type="button" onclick="closeForumModal()">Κλείσιμο</button>
    </form>
  </div>

  <!-- Νέο Modal για "Πες μας για την εμπειρία σου με το πρόγραμμα ERASMUS" (χωρίς περιορισμούς) -->
  <div id="experienceModalOverlay" onclick="closeExperienceModal()"></div>
  <div id="experienceModal">
    <h2>Πες μας για την εμπειρία σου με το πρόγραμμα ERASMUS</h2>
    <form id="experienceForm">
      <label for="experienceText">Εμπειρία:</label>
      <textarea id="experienceText" rows="5" placeholder="Γράψε την εμπειρία σου εδώ..."></textarea>
      <br><br>
      <button type="button" onclick="submitExperience()">Υποβολή Εμπειρίας</button>
      <button type="button" onclick="closeExperienceModal()">Κλείσιμο</button>
    </form>
  </div>

    <!-- Νέο Modal για "Ανέβασε μια φωτογραφία απο την αξέχαστη εμπειρία σου" -->
    <div id="uploadPhotoModalOverlay" onclick="closeUploadPhotoModal()"></div>
    <div id="uploadPhotoModal">
      <h2>Ανέβασε μια φωτογραφία απο την αξέχαστη εμπειρία σου</h2>
      <form id="uploadPhotoForm">
        <label for="photoCaption">Λεζάντα:</label>
        <input type="text" id="photoCaption" placeholder="Γράψε λεζάντα για τη φωτογραφία" style="width:100%; padding:10px; margin-bottom:10px; border:1px solid #ccc; border-radius:6px;">
        <br><br>
        <label for="photoFile" class="custom-file-label">Choose File</label>
        <input type="file" id="photoFile" accept="image/*">
        <br><br>
        <button type="button" onclick="submitPhotoExperience()">Υποβολή Φωτογραφίας</button>
        <button type="button" onclick="closeUploadPhotoModal()">Κλείσιμο</button>
      </form>
    </div>

  <!-- Info Modal Overlay -->
  <div id="infoModalOverlay" onclick="closeUniversityInfoModal()"></div>
  <!-- Info Modal (για πληροφορίες πανεπιστημίου) -->
  <div id="infoModal">
    <h2 id="infoTitle"></h2>
    <p id="infoCity"></p>
    <p id="infoDescription"></p>
    <div id="infoComments"></div>
    <br>
    <button onclick="showCommentsInInfoModal()">Δείτε Σχόλια</button>
    <button onclick="openCoursesPage()">Δες τα μαθήματα</button>
    <button onclick="closeUniversityInfoModal()">Κλείσιμο</button>
  </div>

  <!-- Profile Modal Overlay -->
  <div id="profileModalOverlay" onclick="closeProfileModal()"></div>
  <!-- Profile Modal -->
  <div id="profileModal">
    <h2>Προφίλ Χρήστη</h2>
    <form id="profileForm">
      <label for="profileFirstName">Όνομα:</label>
      <input type="text" id="profileFirstName" placeholder="Κενό">
      <br><br>
      <label for="profileLastName">Επίθετο:</label>
      <input type="text" id="profileLastName" placeholder="Κενό">
      <br><br>
      <label for="profileDepartment">Τμήμα:</label>
      <input type="text" id="profileDepartment" placeholder="Κενό">
      <br><br>
      <label for="profileYear">Έτος Φοίτησης:</label>
      <input type="text" id="profileYear" placeholder="Κενό">
      <br><br>
      <button type="button" onclick="saveProfile()">Αποθήκευση</button>
      <button type="button" onclick="closeProfileModal()">Κλείσιμο</button>
    </form>
  </div>

  <!-- Sidebar (δεξιά) με το ημερολόγιο -->
  <div id="mySidebar" class="sidebar">
    <span class="closebtn" onclick="toggleSidebar()">&times;</span>
    <div class="calendar-container">
      <div class="calendar-title">March 2025</div>
      <table class="calendar">
        <thead>
          <tr>
            <th>M</th>
            <th>T</th>
            <th>W</th>
            <th>T</th>
            <th>F</th>
            <th>S</th>
            <th>S</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
            <td>5</td>
            <td>6</td>
            <td>7</td>
          </tr>
          <tr>
            <td>8</td>
            <td>9</td>
            <td>10</td>
            <td>11</td>
            <td>12</td>
            <td>13</td>
            <td>14</td>
          </tr>
          <tr>
            <td>15</td>
            <td>16</td>
            <td>17</td>
            <td>18</td>
            <td>19</td>
            <td>20</td>
            <td>21</td>
          </tr>
          <tr>
            <td>22</td>
            <td>23</td>
            <td>24</td>
            <td>25</td>
            <td>26</td>
            <td>27</td>
            <td>28</td>
          </tr>
          <tr>
            <td>29</td>
            <td>30</td>
            <td>31</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="sidebar-buttons" style="padding: 20px; text-align: center;">
      <button type="button" onclick="openProfileModal()" style="display: block; margin: 10px auto; width: 90%;">Το προφίλ μου</button>
      <button onclick="redirectToDeclarations()" style="display: block; margin: 10px auto; width: 90%;">Οι δηλώσεις μου</button>
      <button onclick="redirectToSettings()" style="display: block; margin: 10px auto; width: 90%;">Ρυθμίσεις</button>
      <button onclick="signOut()" style="display: block; margin: 10px auto; width: 90%;">Sign out</button>
    </div>
  </div>

  <footer>
    <p>&copy; 2025 Οικονομικό Πανεπιστήμιο Αθηνών</p>
  </footer>

  <script>
    // Ανάκτηση των τιμών CSRF από τα meta tags
    const csrfToken = document.querySelector('meta[name="_csrf"]').getAttribute("content");
    const csrfHeader = document.querySelector('meta[name="_csrf_header"]').getAttribute("content");

    let universitiesByCountry = {};
    let forumUniversitiesByCountry = {};
    let currentDepartment = "";
    let selectedUniversity = "";

    async function fetchUniversities(department) {
      try {
        const url = '/api/universities?department=' + encodeURIComponent(department);
        const response = await fetch(url);
        universitiesByCountry = await response.json();
        console.log("Fetched universities:", universitiesByCountry);
        const countrySelect = document.getElementById("countrySelect");
        if (countrySelect) {
          countrySelect.innerHTML = '<option value="">Επιλέξτε χώρα</option>';
          Object.keys(universitiesByCountry).forEach(country => {
            const option = document.createElement("option");
            option.value = country;
            option.textContent = country;
            countrySelect.appendChild(option);
          });
        }
      } catch (error) {
        console.error("Σφάλμα φόρτωσης δεδομένων:", error);
      }
    }

    async function fetchForumUniversities(department) {
      try {
        const url = '/api/universities?department=' + encodeURIComponent(department);
        const response = await fetch(url);
        forumUniversitiesByCountry = await response.json();
        console.log("Fetched forum universities:", forumUniversitiesByCountry);
        const forumCountrySelect = document.getElementById("forumCountry");
        if (forumCountrySelect) {
          forumCountrySelect.innerHTML = '<option value="">Επιλέξτε Χώρα</option>';
          Object.keys(forumUniversitiesByCountry).forEach(country => {
            const option = document.createElement("option");
            option.value = country;
            option.textContent = country;
            forumCountrySelect.appendChild(option);
          });
        }
      } catch (error) {
        console.error("Σφάλμα φόρτωσης δεδομένων για το forum:", error);
      }
    }

    function populateForumUniversities(country) {
      const forumUniversitySelect = document.getElementById("forumUniversity");
      forumUniversitySelect.innerHTML = '<option value="">Επιλέξτε Πανεπιστήμιο</option>';
      if (forumUniversitiesByCountry[country]) {
        forumUniversitiesByCountry[country].forEach(university => {
          const option = document.createElement("option");
          option.value = university;
          option.textContent = university;
          forumUniversitySelect.appendChild(option);
        });
      }
    }

    function showHome() {
      document.getElementById("content").innerHTML = `
        <hr>
        <h2>Πρόγραμμα Erasmus+</h2>
        <p>
          Αναζητάς μια εμπειρία που θα μεταμορφώσει τη ζωή σου; Το πρόγραμμα Erasmus σου προσφέρει την ευκαιρία 
          να σπουδάσεις σε κορυφαία πανεπιστήμια της Ευρώπης, να αναπτύξεις τις γλωσσικές σου δεξιότητες 
          και να γνωρίσεις νέους ανθρώπους από κάθε γωνιά του κόσμου. Εδώ θα ανακαλύψεις διαφορετικούς πολιτισμούς, 
          θα δημιουργήσεις αξέχαστες φιλίες και θα εμπλουτίσεις το βιογραφικό σου με μοναδικές εμπειρίες. 
          Κάθε στιγμή θα είναι γεμάτη μάθηση και προσωπική εξέλιξη. Μην αφήνεις αυτήν την ευκαιρία να περάσει 
          αναξιοποίητη – κάνε το πρώτο βήμα προς ένα λαμπρό μέλλον και ζήσε την αξέχαστη εμπειρία του Erasmus!
        </p>
        <br><br>
        <!-- Κοντέινερ με flex layout για να εμφανίζονται οριζόντια -->
        <img src="/images/airplane.png" style="width: 100%; height: 250px; display: block;">
        <div class="button-container">
          <button class="custom-button" onclick="openForumModal()">
            Πες μας για το Πανεπιστήμιο που πήγες!!
          </button>
          <button class="custom-button" onclick="openExperienceModal()">
            Πες μας για την εμπειρία σου με το πρόγραμμα ERASMUS
          </button>
          <button class="custom-button" onclick="openUploadPhotoModal()">
            Ανέβασε μια φωτογραφία απο την αξέχαστη εμπειρία σου
          </button>
        </div>
        <h2>Ακόμα σκεφτεσαι να πας ERASMUS;;</h2>
        <div id="studentComments"></div>
      `;
      loadHomeComments();
    }

    async function showDepartment(name) {
      currentDepartment = name;
      document.getElementById("content").innerHTML = `
        <h2>${name}</h2>
        <p>Επιλέξτε χώρα για να δείτε τα συνεργαζόμενα πανεπιστήμια.</p>
        <div class="select-container">
          <select id="countrySelect" onchange="showUniversitiesByCountry()">
            <option value="">Επιλέξτε χώρα</option>
          </select>
        </div>
        <div class="table-container" id="tableContainer">
          <h3>Συνεργαζόμενα Πανεπιστήμια</h3>
          <table id="universityTable">
            <tr>
              <th>Πανεπιστήμια</th>
            </tr>
          </table>
        </div>
        <div id="forumCommentsContainer"></div>
      `;
      await fetchUniversities(name);
    }

    function showUniversitiesByCountry() {
      const country = document.getElementById("countrySelect").value;
      const tableContainer = document.getElementById("tableContainer");
      const universityTable = document.getElementById("universityTable");

      universityTable.innerHTML = `<tr><th>Πανεπιστήμια</th></tr>`;
      if (country === "" || !universitiesByCountry[country]) {
        tableContainer.style.display = "none";
        return;
      }
      universitiesByCountry[country].forEach(university => {
        const row = universityTable.insertRow();
        const cell = row.insertCell(0);
        cell.textContent = university;
        row.style.cursor = "pointer";
        row.onclick = function() {
          openUniversityInfoModal(university);
        };
      });
      tableContainer.style.display = "block";
    }


    async function openUniversityInfoModal(university) {
      selectedUniversity = university;
      const modal = document.getElementById("infoModal");
      const overlay = document.getElementById("infoModalOverlay");
      try {
        const response = await fetch(`/api/universityInfo?university=${encodeURIComponent(university)}`);
        const info = await response.json();
        document.getElementById("infoTitle").textContent = university;
        document.getElementById("infoCity").textContent = `Πόλη: ${info.city}`;
        document.getElementById("infoDescription").innerHTML = info.description;
        document.getElementById("infoComments").innerHTML = "";
      } catch (error) {
        console.error("Σφάλμα φόρτωσης πληροφοριών πανεπιστημίου:", error);
        document.getElementById("infoTitle").textContent = university;
        document.getElementById("infoCity").textContent = "Πόλη: -";
        document.getElementById("infoDescription").innerHTML = "Δεν υπάρχουν καταχωρημένες πληροφορίες για αυτό το πανεπιστήμιο.";
      }
      // Εμφανίζουμε το modal και το overlay
      modal.style.display = "block";
      overlay.style.display = "block";
      // Με μικρό timeout ενεργοποιούμε τις μεταβάσεις (opacity και transform)
      setTimeout(() => {
        modal.style.opacity = "1";
        modal.style.transform = "translate(-50%, -50%) scale(1)";
        overlay.style.opacity = "1";
      }, 10);
    }


    function closeUniversityInfoModal() {
      const modal = document.getElementById("infoModal");
      const overlay = document.getElementById("infoModalOverlay");
      modal.classList.remove("show-modal");
      overlay.classList.remove("show-overlay");
    }

    async function showCommentsInInfoModal() {
      try {
        const response = await fetch(`/api/forumPosts?department=${encodeURIComponent(currentDepartment)}&university=${encodeURIComponent(selectedUniversity)}`);
        const posts = await response.json();
        const commentsDiv = document.getElementById("infoComments");
        commentsDiv.innerHTML = `<h4>Σχόλια για ${selectedUniversity}</h4>`;
        if (posts.length === 0) {
          commentsDiv.innerHTML += `<p>Δεν υπάρχουν ακόμα σχόλια για αυτό το πανεπιστήμιο.</p>`;
        } else {
          posts.forEach(post => {
            const postDiv = document.createElement("div");
            postDiv.innerHTML = `<strong>${post.username}</strong> - ${new Date(post.timestamp).toLocaleString()}<br>${post.experience}<hr>`;
            commentsDiv.appendChild(postDiv);
          });
        }
      } catch (error) {
        console.error("Σφάλμα φόρτωσης σχολίων:", error);
      }
    }

    async function submitForumPost() {
      const department = document.getElementById('forumDepartment').value;
      const university = document.getElementById('forumUniversity').value;
      const experience = document.getElementById('forumExperience').value;
      const data = { type: 'experience', department, university, experience };
      try {
        const response = await fetch('/api/forumPosts', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            [csrfHeader]: csrfToken
          },
          body: JSON.stringify(data)
        });
        if (response.ok) {
          alert('Η εμπειρία σας καταχωρήθηκε επιτυχώς.');
          closeForumModal();
          loadHomeComments();
        } else {
          alert('Παρουσιάστηκε σφάλμα κατά την καταχώρηση.');
        }
      } catch (error) {
        console.error(error);
        alert('Σφάλμα κατά την αποστολή της εμπειρίας.');
      }
    }

    // Νέες συναρτήσεις για το Forum
    function showForum() {
      document.getElementById("content").innerHTML = `
        <style>
          @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
          }
          .forum-title {
            text-align: center;
            font-size: 42px;
            color: #002147;
            margin-bottom: 30px;
            font-weight: bold;
            letter-spacing: 1.5px;
            text-transform: uppercase;
          }
          .forum-subtitle {
            text-align: center;
            font-size: 26px;
            color: #00509e;
            margin-bottom: 30px;
          }
          .forum-form {
            display: flex;
            flex-direction: column;
            gap: 25px;
          }
          .forum-input, .forum-textarea {
            width: 100%;
            padding: 18px;
            font-size: 18px;
            border: 2px solid #ddd;
            border-radius: 12px;
            transition: border-color 0.3s;
            outline: none;
          }
          .forum-input:focus, .forum-textarea:focus {
            border-color: #00509e;
          }
          .forum-button {
            align-self: center;
            padding: 18px 36px;
            font-size: 20px;
            background: linear-gradient(135deg, #00509e, #0073e6);
            color: #fff;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
          }
          .forum-button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
          }
        </style>
        <div class="forum-container">
          <h2 class="forum-title">ERASMUS FORUM</h2>
          <div id="forumContainer" style="margin-bottom: 40px;"></div>
          <h3 class="forum-subtitle">Κάνε μια ερώτηση</h3>
          <form id="forumQuestionForm" class="forum-form">
            <input type="text" id="questionTitle" placeholder="Τίτλος ερώτησης" required class="forum-input">
            <textarea id="questionBody" rows="5" placeholder="Γράψε την ερώτησή σου εδώ" required class="forum-textarea"></textarea>
            <button type="button" onclick="submitForumQuestion()" class="forum-button">
              Υποβολή Ερώτησης
            </button>
          </form>
        </div>
      `;
      loadForumPosts();
    }

    async function loadForumPosts() {
      try {
        const response = await fetch('/api/forumPosts');
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        const posts = await response.json();
        let html = '';
        if (posts.length === 0) {
          html = '<p>Δεν υπάρχουν ερωτήσεις ακόμα.</p>';
        } else {
          posts.forEach(post => {
            html += `<div class="forum-post" id="post-${post.id}" style="border: 1px solid #ccc; padding: 15px; margin-bottom: 20px; border-radius: 8px;">
                <h3>${post.title}</h3>
                <p>${post.body}</p>
                <p><em>Από: ${post.username} - ${new Date(post.timestamp).toLocaleString()}</em></p>
                <p id="post-like-count-${post.id}">Likes: ${post.likeCount}</p>
                <button id="post-like-button-${post.id}" class="like-button" onclick="toggleLikePost(${post.id})"></button>
                <button onclick="toggleReplyForm(${post.id})">Απάντηση</button>
                <div class="reply-form" id="reply-form-${post.id}" style="display:none; margin-top:10px;">
                  <textarea id="reply-text-${post.id}" rows="3" placeholder="Γράψτε την απάντησή σας..."></textarea>
                  <br>
                  <button onclick="submitForumReply(${post.id})">Υποβολή Απάντησης</button>
                </div>
                <div class="replies" id="replies-${post.id}" style="margin-top:10px;">`;
            if (post.replies && post.replies.length > 0) {
              post.replies.forEach(reply => {
                html += `<div style="border-top: 1px dashed #ccc; padding-top: 10px; margin-top: 10px;">
                    <p>${reply.reply}</p>
                    <p><em>Από: ${reply.username} - ${new Date(reply.timestamp).toLocaleString()}</em></p>
                    <p id="reply-like-count-${reply.id}">Likes: ${reply.likeCount}</p>
                    <button onclick="likeReply(${reply.id})">Like</button>
                  </div>`;
              });
            } else {
              html += `<p style="font-style: italic;">Δεν υπάρχουν απαντήσεις.</p>`;
            }
            html += `</div></div>`;
          });
        }
        document.getElementById("forumContainer").innerHTML = html;
      } catch (error) {
        console.error("Σφάλμα φόρτωσης forum posts:", error);
        document.getElementById("forumContainer").innerHTML = "<p>Σφάλμα φόρτωσης forum posts.</p>";
      }
    }

    function toggleReplyForm(postId) {
      const form = document.getElementById("reply-form-" + postId);
      if (form.style.display === "none" || form.style.display === "") {
        form.style.display = "block";
      } else {
        form.style.display = "none";
      }
    }

    async function submitForumQuestion() {
      const title = document.getElementById("questionTitle").value;
      const body = document.getElementById("questionBody").value;
      const data = { type: 'question', title, body };
      try {
        const response = await fetch('/api/forumPosts', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            [csrfHeader]: csrfToken
          },
          body: JSON.stringify(data)
        });
        if (response.ok) {
          alert("Η ερώτησή σας καταχωρήθηκε επιτυχώς.");
          // Προσθέτουμε μια μικρή καθυστέρηση πριν ανανεώσουμε το forum
          setTimeout(() => {
            showForum();
          }, 100);
        } else {
          alert("Παρουσιάστηκε σφάλμα κατά την καταχώρηση της ερώτησης.");
        }
      } catch (error) {
        console.error("Σφάλμα κατά την υποβολή της ερώτησης:", error);
      }
    }


    async function submitForumReply(postId) {
      if (!postId) {
        alert("Σφάλμα: Δεν υπάρχει έγκυρο postId.");
        return;
      }
      const replyText = document.getElementById("reply-text-" + postId).value;
      
      // Ετοιμάζουμε τα δεδομένα ως JSON
      const data = {
        postId: postId,
        reply: replyText
      };

      try {
        const response = await fetch("/forum/reply/add", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            [csrfHeader]: csrfToken
          },
          body: JSON.stringify(data)
        });

        if (!response.ok) {
          throw new Error("Reply submission failed");
        }

        const newReply = await response.json();
        addReplyToDom(postId, newReply);
      } catch (error) {
        console.error("Error:", error);
        alert("Παρουσιάστηκε σφάλμα κατά την υποβολή της απάντησης.");
      }
    }




    // Νέα συνάρτηση για την υποβολή εμπειρίας χωρίς περιορισμούς
    async function submitExperience() {
      const experienceText = document.getElementById("experienceText").value;
      const data = { type: 'experience', department: '', university: '', experience: experienceText };
      try {
        const response = await fetch('/api/forumPosts', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            [csrfHeader]: csrfToken
          },
          body: JSON.stringify(data)
        });
        if (response.ok) {
          alert("Η εμπειρία σας καταχωρήθηκε επιτυχώς.");
          closeExperienceModal();
          loadHomeComments();
        } else {
          alert("Παρουσιάστηκε σφάλμα κατά την καταχώρηση της εμπειρίας.");
        }
      } catch (error) {
        console.error(error);
        alert("Σφάλμα κατά την αποστολή της εμπειρίας.");
      }
    }

    async function submitPhotoExperience() {
      const caption = document.getElementById("photoCaption").value;
      const photoFile = document.getElementById("photoFile").files[0];
      if (!photoFile) {
        alert("Παρακαλώ επιλέξτε μια φωτογραφία.");
        return;
      }
      const formData = new FormData();
      formData.append("caption", caption);
      formData.append("photo", photoFile);
      formData.append("type", "photoExperience");
      formData.append("_csrf", csrfToken);
      try {
        const response = await fetch('/api/photoExperience', {
          method: 'POST',
          body: formData
        });
        if (response.ok) {
          alert("Η φωτογραφία σας ανέβηκε επιτυχώς.");
          closeUploadPhotoModal();
          loadHomeComments();
        } else {
          alert("Παρουσιάστηκε σφάλμα κατά την ανέβασμα της φωτογραφίας.");
        }
      } catch (error) {
        console.error(error);
        alert("Σφάλμα κατά την αποστολή της φωτογραφίας.");
      }
    }

    // Συνάρτηση για το toggle like για posts
    async function toggleLikePost(postId) {
      const button = document.getElementById(`post-like-button-${postId}`);
      const likeCountElement = document.getElementById(`post-like-count-${postId}`);
      let currentLikes = parseInt(likeCountElement.innerText.replace('Likes: ', '')) || 0;
      if (!button.classList.contains("liked")) {
        try {
          const response = await fetch(`/forum/like?postId=${postId}`, {
            method: 'POST',
            headers: { [csrfHeader]: csrfToken }
          });
          if (response.ok) {
            button.classList.add("liked");
            likeCountElement.innerText = `Likes: ${currentLikes + 1}`;
          } else {
            alert('Παρουσιάστηκε σφάλμα κατά το Like.');
          }
        } catch (error) {
          console.error(error);
          alert('Αποτυχία σύνδεσης για το Like.');
        }
      } else {
        try {
          const response = await fetch(`/forum/unlike?postId=${postId}`, {
            method: 'POST',
            headers: { [csrfHeader]: csrfToken }
          });
          if (response.ok) {
            button.classList.remove("liked");
            likeCountElement.innerText = `Likes: ${Math.max(currentLikes - 1, 0)}`;
          } else {
            alert('Παρουσιάστηκε σφάλμα κατά την αφαίρεση του Like.');
          }
        } catch (error) {
          console.error(error);
          alert('Αποτυχία σύνδεσης για το Unlike.');
        }
      }
    }

    async function likeReply(replyId) {
      try {
        const response = await fetch(`/api/replies/${replyId}/like`, {
          method: 'POST',
          headers: { [csrfHeader]: csrfToken }
        });
        if (response.ok) {
          const likeCountElement = document.getElementById(`reply-like-count-${replyId}`);
          if (likeCountElement) {
            const currentLikes = parseInt(likeCountElement.innerText.replace('Likes: ', '')) || 0;
            likeCountElement.innerText = `Likes: ${currentLikes + 1}`;
          }
        } else {
          alert('Παρουσιάστηκε σφάλμα κατά το Like.');
        }
      } catch (error) {
        console.error(error);
        alert('Αποτυχία σύνδεσης για το Like.');
      }
    }

    // Συνάρτηση για το άνοιγμα του modal της εμπειρίας
    function openExperienceModal() {
      const modal = document.getElementById("experienceModal");
      const overlay = document.getElementById("experienceModalOverlay");
      modal.style.display = "block";
      overlay.style.display = "block";
      setTimeout(() => {
        modal.style.opacity = "1";
        modal.style.transform = "translate(-50%, -50%) scale(1)";
        overlay.style.opacity = "1";
      }, 10);
    }

    function closeExperienceModal() {
      document.getElementById("experienceModal").style.display = "none";
      document.getElementById("experienceModalOverlay").style.display = "none";
    }

    // Παλιές συναρτήσεις για το Forum Modal
    function openForumModal() {
      const modal = document.getElementById("forumModal");
      const overlay = document.getElementById("forumModalOverlay");
      modal.style.display = "block";
      overlay.style.display = "block";
      // Με ένα μικρό timeout για να ενεργοποιηθούν οι μεταβάσεις
      setTimeout(() => {
        modal.style.opacity = "1";
        modal.style.transform = "translate(-50%, -50%) scale(1)";
        overlay.style.opacity = "1";
      }, 10);
    }

    function closeForumModal() {
      document.getElementById("forumModal").style.display = "none";
      document.getElementById("forumModalOverlay").style.display = "none";
    }

    function openUploadPhotoModal() {
      const modal = document.getElementById("uploadPhotoModal");
      const overlay = document.getElementById("uploadPhotoModalOverlay");

      modal.style.display = "block";
      overlay.style.display = "block";

      // Για smooth εμφάνιση:
      setTimeout(() => {
        modal.style.opacity = "1";
        modal.style.transform = "translate(-50%, -50%) scale(1)";
        overlay.style.opacity = "1";
      }, 10);
    }

    function closeUploadPhotoModal() {
      const modal = document.getElementById("uploadPhotoModal");
      const overlay = document.getElementById("uploadPhotoModalOverlay");

      // Αντίστροφο fade out:
      modal.style.opacity = "0";
      modal.style.transform = "translate(-50%, -50%) scale(0.9)";
      overlay.style.opacity = "0";

      // Μετά από 300ms, κρύβουμε το display
      setTimeout(() => {
        modal.style.display = "none";
        overlay.style.display = "none";
      }, 300);
    }

    
    async function loadHomeComments() {
      try {
        const response = await fetch('/api/forumPosts');
        const posts = await response.json();
        let html = '<table class="comment-table" id="homeCommentTable">';
        html += '<thead><tr><th>Σχόλιο</th></tr></thead><tbody>';
        if (posts.length === 0) {
          html += '<tr><td>Δεν υπάρχουν σχόλια ακόμη.</td></tr>';
        } else {
          posts.forEach(post => {
            html += `<tr><td><strong>${post.username}</strong> - ${new Date(post.timestamp).toLocaleString()}<br>${post.experience}</td></tr>`;
          });
        }
        html += '</tbody></table>';
        document.getElementById("studentComments").innerHTML = html;
      } catch (error) {
        console.error("Σφάλμα φόρτωσης σχολίων:", error);
        document.getElementById("studentComments").innerHTML = '<p>Σφάλμα φόρτωσης σχολίων.</p>';
      }
    }

    function openCoursesPage() {
      window.location.href = "/courses?university=" + encodeURIComponent(selectedUniversity);
    }
    
    function toggleSidebar() {
      const sidebar = document.getElementById("mySidebar");
      if (sidebar.style.width === "320px") {
        sidebar.style.width = "0";
      } else {
        sidebar.style.width = "320px";
      }
    }
    
    function openProfileModal() {
      const modal = document.getElementById("profileModal");
      const overlay = document.getElementById("profileModalOverlay");
      modal.style.display = "block";
      overlay.style.display = "block";
      setTimeout(() => {
        modal.style.opacity = "1";
        modal.style.transform = "translate(-50%, -50%) scale(1)";
        overlay.style.opacity = "1";
      }, 10);
    }


    function closeProfileModal() {
      document.getElementById("profileModal").style.display = "none";
      document.getElementById("profileModalOverlay").style.display = "none";
    }
    function saveProfile() {
      const firstName = document.getElementById("profileFirstName").value;
      const lastName = document.getElementById("profileLastName").value;
      const department = document.getElementById("profileDepartment").value;
      const year = document.getElementById("profileYear").value;
      alert("Όνομα: " + firstName + "\nΕπίθετο: " + lastName + "\nΤμήμα: " + department + "\nΈτος Φοίτησης: " + year);
      closeProfileModal();
    }
    
    function redirectToDeclarations() {
      window.location.href = "/declarations";
    }
    function redirectToSettings() {
      window.location.href = "/settings";
    }
    function signOut() {
      window.location.href = "/login";
    }
    
    function showApplication() {
      document.getElementById("content").innerHTML = `
        <h2>Φτιάξε την αίτησή σου</h2>
        <p>Εδώ μπορείτε να δημιουργήσετε την αίτησή σας για το πρόγραμμα Erasmus.</p>
      `;
    }
  </script>
</body>
</html>
