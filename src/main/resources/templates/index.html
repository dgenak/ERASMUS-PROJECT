<!DOCTYPE html>
<html lang="el" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="_csrf" th:content="${_csrf.token}"/>
  <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
  <title>ΟΠΑ - ERASMUS</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #00509e;
      --primary-dark: #003366;
      --primary-light: #0073e6;
      --secondary: #ff6b6b;
      --accent: #4ecdc4;
      --light: #f8f9fa;
      --dark: #343a40;
      --gray: #6c757d;
      --light-gray: #e9ecef;
      --border-radius: 12px;
      --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
      color: var(--dark);
      line-height: 1.6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Header Styles */
    header {
      background: linear-gradient(135deg, var(--primary-dark), var(--primary));
      color: white;
      padding: 1.5rem 0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      position: relative;
      overflow: hidden;
    }

    .header-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
    }

    .logo-container {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .logo {
      width: 60px;
      height: 60px;
      background: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: var(--primary);
      font-size: 1.5rem;
    }

    .header-title {
      font-size: 2.5rem;
      font-weight: 700;
      background: linear-gradient(to right, #fff, #e6f7ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .auth-section {
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    .auth-btn {
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border: none;
      padding: 0.5rem 1.2rem;
      border-radius: 30px;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      backdrop-filter: blur(10px);
    }

    .auth-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
    }

    .user-profile {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: white;
      cursor: pointer;
      padding: 0.5rem 1rem;
      border-radius: 30px;
      transition: var(--transition);
    }

    .user-profile:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: white;
    }

    /* Navigation Styles */
    nav {
      background: white;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .nav-links {
      display: flex;
      list-style: none;
    }

    .nav-link {
      padding: 1.2rem 1.5rem;
      text-decoration: none;
      color: var(--dark);
      font-weight: 500;
      transition: var(--transition);
      position: relative;
    }

    .nav-link:hover {
      color: var(--primary);
    }

    .nav-link.active {
      color: var(--primary);
    }

    .nav-link.active::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background: var(--primary);
      border-radius: 3px 3px 0 0;
    }

    .dropdown {
      position: relative;
    }

    .dropdown-content {
      position: absolute;
      top: 100%;
      left: 0;
      background: white;
      min-width: 250px;
      box-shadow: var(--box-shadow);
      border-radius: 0 0 var(--border-radius) var(--border-radius);
      opacity: 0;
      visibility: hidden;
      transform: translateY(10px);
      transition: var(--transition);
      z-index: 10;
    }

    .dropdown:hover .dropdown-content {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .dropdown-item {
      display: block;
      padding: 1rem 1.5rem;
      text-decoration: none;
      color: var(--dark);
      transition: var(--transition);
      border-bottom: 1px solid var(--light-gray);
    }

    .dropdown-item:hover {
      background: var(--light);
      color: var(--primary);
    }

    .dropdown-item:last-child {
      border-bottom: none;
    }

    /* Main Content Styles */
    .main-container {
      flex: 1;
      max-width: 1200px;
      margin: 2rem auto;
      padding: 0 2rem;
      width: 100%;
    }

    .content-card {
      background: white;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      padding: 2.5rem;
      margin-bottom: 2rem;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .section-title {
      font-size: 2rem;
      color: var(--primary-dark);
      margin-bottom: 1.5rem;
      position: relative;
      padding-bottom: 0.5rem;
    }

    .section-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 60px;
      height: 4px;
      background: var(--accent);
      border-radius: 2px;
    }

    .hero-section {
      text-align: center;
      padding: 3rem 2rem;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
      color: white;
      border-radius: var(--border-radius);
      margin-bottom: 2rem;
    }

    .hero-title {
      font-size: 3rem;
      margin-bottom: 1rem;
      font-weight: 700;
    }

    .hero-subtitle {
      font-size: 1.2rem;
      margin-bottom: 2rem;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }

    .cta-buttons {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      flex-wrap: wrap;
    }

    .cta-button {
      background: white;
      color: var(--primary);
      border: none;
      padding: 1rem 2rem;
      border-radius: 50px;
      font-weight: 600;
      font-size: 1.1rem;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .cta-button:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }

    .cta-button.secondary {
      background: transparent;
      color: white;
      border: 2px solid white;
    }

    .cta-button.secondary:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    /* Feature Cards */
    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }

    .feature-card {
      background: white;
      border-radius: var(--border-radius);
      padding: 2rem;
      box-shadow: var(--box-shadow);
      transition: var(--transition);
      text-align: center;
      border-top: 4px solid var(--primary);
    }

    .feature-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
    }

    .feature-icon {
      font-size: 3rem;
      color: var(--primary);
      margin-bottom: 1rem;
    }

    .feature-title {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      color: var(--primary-dark);
    }

    .feature-description {
      color: var(--gray);
    }

    /* Department Section */
    .department-selector {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .department-btn {
      background: var(--light);
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 30px;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
    }

    .department-btn:hover {
      background: var(--primary-light);
      color: white;
    }

    .department-btn.active {
      background: var(--primary);
      color: white;
    }

    .university-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1.5rem;
    }

    .university-table th {
      background: var(--primary);
      color: white;
      padding: 1rem;
      text-align: left;
    }

    .university-table td {
      padding: 1rem;
      border-bottom: 1px solid var(--light-gray);
      cursor: pointer;
    }

    .university-table tr:hover {
      background: var(--light);
    }

    /* Forum Styles */
    .forum-posts {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .forum-post {
      background: white;
      border-radius: var(--border-radius);
      padding: 1.5rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      transition: var(--transition);
    }

    .forum-post:hover {
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
    }

    .post-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .post-author {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .post-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
    }

    .post-title {
      font-size: 1.3rem;
      color: var(--primary-dark);
      margin-bottom: 0.5rem;
    }

    .post-actions {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
    }

    .action-btn {
      background: none;
      border: none;
      color: var(--gray);
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }

    .action-btn:hover {
      color: var(--primary);
    }

    .reply-form {
      margin-top: 1rem;
      padding: 1rem;
      background: var(--light);
      border-radius: var(--border-radius);
    }

    .reply-item {
      margin-top: 1rem;
      padding: 1rem;
      background: var(--light);
      border-radius: var(--border-radius);
      border-left: 3px solid var(--primary);
    }

    /* Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: var(--transition);
    }

    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .modal {
      background: white;
      border-radius: var(--border-radius);
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
      transform: scale(0.9);
      opacity: 0;
      transition: var(--transition);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    }

    .modal-overlay.active .modal {
      transform: scale(1);
      opacity: 1;
    }

    .modal-header {
      padding: 1.5rem 2rem;
      border-bottom: 1px solid var(--light-gray);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-title {
      font-size: 1.5rem;
      color: var(--primary-dark);
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--gray);
    }

    .modal-body {
      padding: 2rem;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
    }

    .form-control {
      width: 100%;
      padding: 0.8rem 1rem;
      border: 1px solid var(--light-gray);
      border-radius: 8px;
      font-family: inherit;
      transition: var(--transition);
    }

    .form-control:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(0, 80, 158, 0.1);
    }

    .form-textarea {
      min-height: 120px;
      resize: vertical;
    }

    .form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 1rem;
      margin-top: 2rem;
    }

    .btn {
      padding: 0.8rem 1.5rem;
      border: none;
      border-radius: 8px;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background: var(--primary-dark);
    }

    .btn-secondary {
      background: var(--light-gray);
      color: var(--dark);
    }

    .btn-secondary:hover {
      background: #d1d5db;
    }

    /* Sidebar Styles */
    .sidebar {
      position: fixed;
      top: 0;
      right: -350px;
      width: 350px;
      height: 100%;
      background: white;
      box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
      transition: var(--transition);
      z-index: 1000;
      overflow-y: auto;
    }

    .sidebar.active {
      right: 0;
    }

    .sidebar-header {
      padding: 1.5rem;
      background: var(--primary);
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .sidebar-close {
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
    }

    .sidebar-content {
      padding: 1.5rem;
    }

    .calendar-container {
      margin-bottom: 2rem;
    }

    .calendar-title {
      font-size: 1.2rem;
      margin-bottom: 1rem;
      color: var(--primary-dark);
      text-align: center;
    }

    .calendar {
      width: 100%;
      border-collapse: collapse;
    }

    .calendar th {
      background: var(--light);
      padding: 0.5rem;
      text-align: center;
      font-weight: 500;
    }

    .calendar td {
      padding: 0.5rem;
      text-align: center;
      border: 1px solid var(--light-gray);
      cursor: pointer;
    }

    .calendar td:hover {
      background: var(--light);
    }

    .sidebar-actions {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    .sidebar-action {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      padding: 0.8rem 1rem;
      background: var(--light);
      border-radius: 8px;
      text-decoration: none;
      color: var(--dark);
      transition: var(--transition);
    }

    .sidebar-action:hover {
      background: var(--primary-light);
      color: white;
    }

    /* Footer Styles */
    footer {
      background: var(--primary-dark);
      color: white;
      padding: 2rem 0;
      margin-top: auto;
    }

    .footer-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .footer-logo {
      font-size: 1.5rem;
      font-weight: 700;
    }

    .footer-text {
      color: rgba(255, 255, 255, 0.7);
    }

    /* Responsive Styles */
    @media (max-width: 768px) {
      .header-container {
        flex-direction: column;
        gap: 1rem;
      }
      
      .nav-container {
        flex-direction: column;
        padding: 1rem;
      }
      
      .nav-links {
        flex-wrap: wrap;
        justify-content: center;
      }
      
      .hero-title {
        font-size: 2rem;
      }
      
      .cta-buttons {
        flex-direction: column;
        align-items: center;
      }
      
      .features-grid {
        grid-template-columns: 1fr;
      }
      
      .sidebar {
        width: 100%;
        right: -100%;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="header-container">
      <div class="logo-container">
        <div class="logo">EU</div>
        <h1 class="header-title">Erasmus+</h1>
      </div>
      <div class="auth-section">
        <!-- Αν δεν είναι συνδεδεμένος ο χρήστης -->
        <div sec:authorize="!isAuthenticated()">
          <button class="auth-btn" onclick="window.location.href='/login'">Log In</button>
          <button class="auth-btn" onclick="window.location.href='/register'">Sign Up</button>
        </div>
        <!-- Εάν είναι συνδεδεμένος ο χρήστης -->
        <div class="user-profile" sec:authorize="isAuthenticated()" onclick="openProfileModal()">
        
          <span sec:authentication="principal.username">Χρήστης</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Navigation -->
  <nav>
    <div class="nav-container">
      <ul class="nav-links">
        <li><a href="#" class="nav-link active" onclick="showHome()">ΑΡΧΙΚΗ</a></li>
        <li class="dropdown">
          <a href="#" class="nav-link">ΤΜΗΜΑΤΑ</a>
          <div class="dropdown-content">
            <a href="#" class="dropdown-item" onclick="showDepartment('Οικονομικής Επιστήμης')">Οικονομικής Επιστήμης</a>
            <a href="#" class="dropdown-item" onclick="showDepartment('Διεθνών και Ευρωπαϊκών Οικονομικών Σπουδών')">Διεθνών και Ευρωπαϊκών Οικονομικών Σπουδών</a>
            <a href="#" class="dropdown-item" onclick="showDepartment('Διοικητικής Επιστήμης και Τεχνολογίας')">Διοικητικής Επιστήμης και Τεχνολογίας</a>
            <a href="#" class="dropdown-item" onclick="showDepartment('Οργάνωσης και Διοίκησης Επιχειρήσεων')">Οργάνωσης και Διοίκησης Επιχειρήσεων</a>
            <a href="#" class="dropdown-item" onclick="showDepartment('Μάρκετινγκ και Επικοινωνίας')">Μάρκετινγκ και Επικοινωνίας</a>
            <a href="#" class="dropdown-item" onclick="showDepartment('Στατιστικής')">Στατιστικής</a>
            <a href="#" class="dropdown-item" onclick="showDepartment('Πληροφορικής')">Πληροφορικής</a>
          </div>
        </li>
        <li><a href="#" class="nav-link" onclick="showForum()">ERASMUS FORUM</a></li>
        <li><a href="#" class="nav-link" onclick="showApplication()">ΑΙΤΗΣΕΙΣ</a></li>
      </ul>
      <button class="btn" onclick="toggleSidebar()"><i class="fas fa-bars"></i> Μενού</button>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-container">
    <div id="content">
      <!-- Αρχική σελίδα -->
      <div class="hero-section">
        <h1 class="hero-title">Ζήσε την εμπειρία Erasmus+</h1>
        <p class="hero-subtitle">Ανακαλύψτε νέους πολιτισμούς, αναπτύξτε τις δεξιότητές σας και δημιουργήστε αξέχαστες αναμνήσεις σε κορυφαία πανεπιστήμια της Ευρώπης.</p>
        <div class="cta-buttons">
          <button class="cta-button" onclick="showDepartment('Πληροφορικής')">
            <i class="fas fa-search"></i> Βρες Πανεπιστήμιο
          </button>
          <button class="cta-button secondary" onclick="showForum()">
            <i class="fas fa-comments"></i> Erasmus Forum
          </button>
        </div>
      </div>

      <div class="content-card">
        <h2 class="section-title">Γιατί να επιλέξεις Erasmus+;</h2>
        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-globe-europe"></i>
            </div>
            <h3 class="feature-title">Διεθνής Εμπειρία</h3>
            <p class="feature-description">Ζήσε σε μια διαφορετική χώρα, γνώρισε νέους ανθρώπους και εμπλουτίσε την πολιτισμική σου εμπειρία.</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-graduation-cap"></i>
            </div>
            <h3 class="feature-title">Ακαδημαϊκή Εξέλιξη</h3>
            <p class="feature-description">Σπουδάσε σε κορυφαία πανεπιστήμια της Ευρώπης και εμπλουτίσε τις γνώσεις σου.</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-briefcase"></i>
            </div>
            <h3 class="feature-title">Επαγγελματική Προοπτική</h3>
            <p class="feature-description">Βελτίωσε το βιογραφικό σου με μια διεθνή εμπειρία που εκτιμάται από εργοδότες.</p>
          </div>
        </div>
      </div>

      <div class="content-card">
        <h2 class="section-title">Πρόσφατες Εμπειρίες Φοιτητών</h2>
        <div id="studentComments">
          <!-- Τα σχόλια θα εμφανιστούν εδώ -->
        </div>
      </div>
    </div>
  </main>

  <!-- Forum Modal -->
  <div class="modal-overlay" id="forumModalOverlay">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title">Πες μας για το Πανεπιστήμιο που πήγες</h2>
        <button class="modal-close" onclick="closeForumModal()">&times;</button>
      </div>
      <div class="modal-body">
        <form id="forumForm">
          <div class="form-group">
            <label class="form-label" for="forumDepartment">Τμήμα:</label>
            <select class="form-control" id="forumDepartment" onchange="fetchForumUniversities(this.value)">
              <option value="">Επιλέξτε Τμήμα</option>
              <option value="Οικονομικής Επιστήμης">Οικονομικής Επιστήμης</option>
              <option value="Διεθνών και Ευρωπαϊκών Οικονομικών Σπουδών">Διεθνών και Ευρωπαϊκών Οικονομικών Σπουδών</option>
              <option value="Διοικητικής Επιστήμης και Τεχνολογίας">Διοικητικής Επιστήμης και Τεχνολογίας</option>
              <option value="Οργάνωσης και Διοίκησης Επιχειρήσεων">Οργάνωσης και Διοίκησης Επιχειρήσεων</option>
              <option value="Μάρκετινγκ και Επικοινωνίας">Μάρκετινγκ και Επικοινωνίας</option>
              <option value="Στατιστικής">Στατιστικής</option>
              <option value="Πληροφορικής">Πληροφορικής</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label" for="forumCountry">Χώρα:</label>
            <select class="form-control" id="forumCountry" onchange="populateForumUniversities(this.value)">
              <option value="">Επιλέξτε Χώρα</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label" for="forumUniversity">Συνεργαζόμενο Πανεπιστήμιο:</label>
            <select class="form-control" id="forumUniversity">
              <option value="">Επιλέξτε Πανεπιστήμιο</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label" for="forumExperience">Εμπειρία:</label>
            <textarea class="form-control form-textarea" id="forumExperience" placeholder="Γράψτε λίγα λόγια για την εμπειρία σας..."></textarea>
          </div>
          <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="closeForumModal()">Κλείσιμο</button>
            <button type="button" class="btn btn-primary" onclick="submitForumPost()">Υποβολή</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- New Question Modal -->
  <div class="modal-overlay" id="questionModalOverlay">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title">Κάνε μια νέα ερώτηση</h2>
        <button class="modal-close" onclick="closeQuestionModal()">&times;</button>
      </div>
      <div class="modal-body">
        <form id="questionForm">
          <div class="form-group">
            <label class="form-label" for="questionTitle">Τίτλος ερώτησης:</label>
            <input type="text" class="form-control" id="questionTitle" placeholder="Γράψτε τον τίτλο της ερώτησής σας...">
          </div>
          <div class="form-group">
            <label class="form-label" for="questionBody">Ερώτηση:</label>
            <textarea class="form-control form-textarea" id="questionBody" placeholder="Γράψτε την ερώτησή σας εδώ..."></textarea>
          </div>
          <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="closeQuestionModal()">Κλείσιμο</button>
            <button type="button" class="btn btn-primary" onclick="submitForumQuestion()">Υποβολή Ερώτησης</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Experience Modal -->
  <div class="modal-overlay" id="experienceModalOverlay">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title">Πες μας για την εμπειρία σου με το πρόγραμμα ERASMUS</h2>
        <button class="modal-close" onclick="closeExperienceModal()">&times;</button>
      </div>
      <div class="modal-body">
        <form id="experienceForm">
          <div class="form-group">
            <label class="form-label" for="experienceText">Εμπειρία:</label>
            <textarea class="form-control form-textarea" id="experienceText" placeholder="Γράψε την εμπειρία σου εδώ..."></textarea>
          </div>
          <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="closeExperienceModal()">Κλείσιμο</button>
            <button type="button" class="btn btn-primary" onclick="submitExperience()">Υποβολή Εμπειρίας</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Profile Modal -->
  <div class="modal-overlay" id="profileModalOverlay">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title">Προφίλ Χρήστη</h2>
        <button class="modal-close" onclick="closeProfileModal()">&times;</button>
      </div>
      <div class="modal-body">
        <form id="profileForm">
          <div class="form-group">
            <label class="form-label" for="profileFirstName">Όνομα:</label>
            <input type="text" class="form-control" id="profileFirstName" placeholder="Κενό">
          </div>
          <div class="form-group">
            <label class="form-label" for="profileLastName">Επίθετο:</label>
            <input type="text" class="form-control" id="profileLastName" placeholder="Κενό">
          </div>
          <div class="form-group">
            <label class="form-label" for="profileDepartment">Τμήμα:</label>
            <input type="text" class="form-control" id="profileDepartment" placeholder="Κενό">
          </div>
          <div class="form-group">
            <label class="form-label" for="profileYear">Έτος Φοίτησης:</label>
            <input type="text" class="form-control" id="profileYear" placeholder="Κενό">
          </div>
          <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="closeProfileModal()">Κλείσιμο</button>
            <button type="button" class="btn btn-primary" onclick="saveProfile()">Αποθήκευση</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h3>Μενού Χρήστη</h3>
      <button class="sidebar-close" onclick="toggleSidebar()">&times;</button>
    </div>
    <div class="sidebar-content">
      <div class="calendar-container">
        <h4 class="calendar-title">Μάρτιος 2025</h4>
        <table class="calendar">
          <thead>
            <tr>
              <th>Δ</th>
              <th>T</th>
              <th>T</th>
              <th>Π</th>
              <th>Π</th>
              <th>Σ</th>
              <th>Κ</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>2</td>
              <td>3</td>
              <td>4</td>
              <td>5</td>
              <td>6</td>
              <td>7</td>
            </tr>
            <tr>
              <td>8</td>
              <td>9</td>
              <td>10</td>
              <td>11</td>
              <td>12</td>
              <td>13</td>
              <td>14</td>
            </tr>
            <tr>
              <td>15</td>
              <td>16</td>
              <td>17</td>
              <td>18</td>
              <td>19</td>
              <td>20</td>
              <td>21</td>
            </tr>
            <tr>
              <td>22</td>
              <td>23</td>
              <td>24</td>
              <td>25</td>
              <td>26</td>
              <td>27</td>
              <td>28</td>
            </tr>
            <tr>
              <td>29</td>
              <td>30</td>
              <td>31</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="sidebar-actions">
        <a href="#" class="sidebar-action" onclick="openProfileModal(); toggleSidebar();">
          <i class="fas fa-user"></i> Το προφίλ μου
        </a>
        <a href="#" class="sidebar-action" onclick="redirectToDeclarations(); toggleSidebar();">
          <i class="fas fa-file-alt"></i> Οι δηλώσεις μου
        </a>
        <a href="#" class="sidebar-action" onclick="redirectToSettings(); toggleSidebar();">
          <i class="fas fa-cog"></i> Ρυθμίσεις
        </a>
        <a href="#" class="sidebar-action" onclick="signOut(); toggleSidebar();">
          <i class="fas fa-sign-out-alt"></i> Αποσύνδεση
        </a>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="footer-container">
      <div class="footer-logo">Erasmus+</div>
      <div class="footer-text">&copy; 2025 Οικονομικό Πανεπιστήμιο Αθηνών</div>
    </div>
  </footer>

  <script>
    // CSRF Token
    const csrfToken = document.querySelector('meta[name="_csrf"]').getAttribute("content");
    const csrfHeader = document.querySelector('meta[name="_csrf_header"]').getAttribute("content");

    let universitiesByCountry = {};
    let forumUniversitiesByCountry = {};
    let currentDepartment = "";
    let selectedUniversity = "";

    // Αρχικοποίηση
    document.addEventListener('DOMContentLoaded', function() {
      showHome();
    });

    // Συναρτήσεις για τα modals
    function openForumModal() {
      document.getElementById('forumModalOverlay').classList.add('active');
    }

    function closeForumModal() {
      document.getElementById('forumModalOverlay').classList.remove('active');
    }

    function openQuestionModal() {
      document.getElementById('questionModalOverlay').classList.add('active');
    }

    function closeQuestionModal() {
      document.getElementById('questionModalOverlay').classList.remove('active');
    }

    function openExperienceModal() {
      document.getElementById('experienceModalOverlay').classList.add('active');
    }

    function closeExperienceModal() {
      document.getElementById('experienceModalOverlay').classList.remove('active');
    }

    function openProfileModal() {
      document.getElementById('profileModalOverlay').classList.add('active');
    }

    function closeProfileModal() {
      document.getElementById('profileModalOverlay').classList.remove('active');
    }

    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('active');
    }

    // Συναρτήσεις για την πλοήγηση
    function showHome() {
      document.getElementById('content').innerHTML = `
        <div class="hero-section">
          <h1 class="hero-title">Ζήσε την εμπειρία Erasmus+</h1>
          <p class="hero-subtitle">Ανακαλύψτε νέους πολιτισμούς, αναπτύξτε τις δεξιότητές σας και δημιουργήστε αξέχαστες αναμνήσεις σε κορυφαία πανεπιστήμια της Ευρώπης.</p>
          <div class="cta-buttons">
            <button class="cta-button" onclick="showDepartment('Πληροφορικής')">
              <i class="fas fa-search"></i> Βρες Πανεπιστήμιο
            </button>
            <button class="cta-button secondary" onclick="showForum()">
              <i class="fas fa-comments"></i> Erasmus Forum
            </button>
          </div>
        </div>

        <div class="content-card">
          <h2 class="section-title">Γιατί να επιλέξεις Erasmus+;</h2>
          <div class="features-grid">
            <div class="feature-card">
              <div class="feature-icon">
                <i class="fas fa-globe-europe"></i>
              </div>
              <h3 class="feature-title">Διεθνής Εμπειρία</h3>
              <p class="feature-description">Ζήσε σε μια διαφορετική χώρα, γνώρισε νέους ανθρώπους και εμπλουτίσε την πολιτισμική σου εμπειρία.</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">
                <i class="fas fa-graduation-cap"></i>
              </div>
              <h3 class="feature-title">Ακαδημαϊκή Εξέλιξη</h3>
              <p class="feature-description">Σπουδάσε σε κορυφαία πανεπιστήμια της Ευρώπης και εμπλουτίσε τις γνώσεις σου.</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">
                <i class="fas fa-briefcase"></i>
              </div>
              <h3 class="feature-title">Επαγγελματική Προοπτική</h3>
              <p class="feature-description">Βελτίωσε το βιογραφικό σου με μια διεθνή εμπειρία που εκτιμάται από εργοδότες.</p>
            </div>
          </div>
        </div>

        <div class="content-card">
          <h2 class="section-title">Πρόσφατες Εμπειρίες Φοιτητών</h2>
          <div id="studentComments">
            <!-- Τα σχόλια θα εμφανιστούν εδώ -->
          </div>
        </div>
      `;
      loadHomeComments();
    }

    async function showDepartment(name) {
      currentDepartment = name;
      document.getElementById('content').innerHTML = `
        <div class="content-card">
          <h2 class="section-title">${name}</h2>
          <p>Επιλέξτε χώρα για να δείτε τα συνεργαζόμενα πανεπιστήμια.</p>
          <div class="department-selector">
            <button class="department-btn active">${name}</button>
          </div>
          <div class="form-group">
            <select class="form-control" id="countrySelect" onchange="showUniversitiesByCountry()">
              <option value="">Επιλέξτε χώρα</option>
            </select>
          </div>
          <div id="tableContainer">
            <h3>Συνεργαζόμενα Πανεπιστήμια</h3>
            <table class="university-table" id="universityTable">
              <thead>
                <tr>
                  <th>Πανεπιστήμια</th>
                </tr>
              </thead>
              <tbody>
                <!-- Πανεπιστήμια θα εμφανιστούν εδώ -->
              </tbody>
            </table>
          </div>
        </div>
      `;
      await fetchUniversities(name);
    }

    function showForum() {
      document.getElementById('content').innerHTML = `
        <div class="content-card">
          <h2 class="section-title">Erasmus Forum</h2>
          <p>Μοιράσου την εμπειρία σου και μάθε από άλλους φοιτητές.</p>
          <div style="display: flex; gap: 1rem; margin-bottom: 2rem;">
            <button class="btn btn-primary" onclick="openQuestionModal()">
              <i class="fas fa-plus"></i> Νέα Ερώτηση
            </button>
            <button class="btn btn-secondary" onclick="openForumModal()">
              <i class="fas fa-share"></i> Μοιράσου Εμπειρία
            </button>
          </div>
          <div class="forum-posts" id="forumContainer">
            <!-- Δημοσιεύσεις θα εμφανιστούν εδώ -->
          </div>
        </div>
      `;
      loadForumPosts();
    }

    function showApplication() {
      document.getElementById('content').innerHTML = `
        <div class="content-card">
          <h2 class="section-title">Φτιάξε την αίτησή σου</h2>
          <p>Εδώ μπορείτε να δημιουργήσετε την αίτησή σας για το πρόγραμμα Erasmus.</p>
          <div class="features-grid">
            <div class="feature-card">
              <div class="feature-icon">
                <i class="fas fa-file-alt"></i>
              </div>
              <h3 class="feature-title">Αίτηση Erasmus</h3>
              <p class="feature-description">Συμπλήρωσε την αίτησή σου για το πρόγραμμα Erasmus+.</p>
              <button class="btn btn-primary" style="margin-top: 1rem;">Συμπλήρωση Αίτησης</button>
            </div>
            <div class="feature-card">
              <div class="feature-icon">
                <i class="fas fa-check-circle"></i>
              </div>
              <h3 class="feature-title">Κριτήρια Επιλογής</h3>
              <p class="feature-description">Μάθε τα κριτήρια επιλογής για το πρόγραμμα Erasmus+.</p>
              <button class="btn btn-primary" style="margin-top: 1rem;">Δες τα Κριτήρια</button>
            </div>
            <div class="feature-card">
              <div class="feature-icon">
                <i class="fas fa-question-circle"></i>
              </div>
              <h3 class="feature-title">Βοήθεια & Οδηγίες</h3>
              <p class="feature-description">Βρες βοήθεια και οδηγίες για τη συμπλήρωση της αίτησής σου.</p>
              <button class="btn btn-primary" style="margin-top: 1rem;">Οδηγίες</button>
            </div>
          </div>
        </div>
      `;
    }

    // Συναρτήσεις για τα πανεπιστήμια - Τώρα χρησιμοποιούν τα πραγματικά endpoints
    async function fetchUniversities(department) {
      try {
        const url = '/api/universities?department=' + encodeURIComponent(department);
        const response = await fetch(url);
        
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        
        universitiesByCountry = await response.json();
        
        const countrySelect = document.getElementById("countrySelect");
        if (countrySelect) {
          countrySelect.innerHTML = '<option value="">Επιλέξτε χώρα</option>';
          Object.keys(universitiesByCountry).forEach(country => {
            const option = document.createElement("option");
            option.value = country;
            option.textContent = country;
            countrySelect.appendChild(option);
          });
        }
      } catch (error) {
        console.error("Σφάλμα φόρτωσης δεδομένων:", error);
        alert("Σφάλμα φόρτωσης δεδομένων πανεπιστημίων. Παρακαλώ δοκιμάστε ξανά.");
      }
    }

    async function fetchForumUniversities(department) {
      try {
        const url = '/api/universities?department=' + encodeURIComponent(department);
        const response = await fetch(url);
        
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        
        forumUniversitiesByCountry = await response.json();
        
        const forumCountrySelect = document.getElementById("forumCountry");
        if (forumCountrySelect) {
          forumCountrySelect.innerHTML = '<option value="">Επιλέξτε Χώρα</option>';
          Object.keys(forumUniversitiesByCountry).forEach(country => {
            const option = document.createElement("option");
            option.value = country;
            option.textContent = country;
            forumCountrySelect.appendChild(option);
          });
        }
      } catch (error) {
        console.error("Σφάλμα φόρτωσης δεδομένων για το forum:", error);
        alert("Σφάλμα φόρτωσης δεδομένων πανεπιστημίων. Παρακαλώ δοκιμάστε ξανά.");
      }
    }

    function populateForumUniversities(country) {
      const forumUniversitySelect = document.getElementById("forumUniversity");
      forumUniversitySelect.innerHTML = '<option value="">Επιλέξτε Πανεπιστήμιο</option>';
      if (forumUniversitiesByCountry[country]) {
        forumUniversitiesByCountry[country].forEach(university => {
          const option = document.createElement("option");
          option.value = university;
          option.textContent = university;
          forumUniversitySelect.appendChild(option);
        });
      }
    }

    function showUniversitiesByCountry() {
      const country = document.getElementById("countrySelect").value;
      const tableContainer = document.getElementById("tableContainer");
      const universityTable = document.getElementById("universityTable");

      // Κρατάμε μόνο το header
      universityTable.innerHTML = `<thead><tr><th>Πανεπιστήμια</th></tr></thead><tbody></tbody>`;
      
      if (country === "" || !universitiesByCountry[country]) {
        tableContainer.style.display = "none";
        return;
      }
      
      const tbody = universityTable.querySelector('tbody');
      universitiesByCountry[country].forEach(university => {
        const row = tbody.insertRow();
        const cell = row.insertCell(0);
        cell.textContent = university;
        row.style.cursor = "pointer";
        row.onclick = function() {
          openUniversityInfoModal(university);
        };
      });
      tableContainer.style.display = "block";
    }

    async function openUniversityInfoModal(university) {
      selectedUniversity = university;
      
      try {
        const response = await fetch(`/api/universityInfo?university=${encodeURIComponent(university)}`);
        
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        
        const info = await response.json();
        
        // Δημιουργία modal για πληροφορίες πανεπιστημίου
        const modalHTML = `
          <div class="modal-overlay active" id="universityModalOverlay">
            <div class="modal">
              <div class="modal-header">
                <h2 class="modal-title">${university}</h2>
                <button class="modal-close" onclick="closeUniversityModal()">&times;</button>
              </div>
              <div class="modal-body">
                <div class="form-group">
                  <label class="form-label">Πόλη:</label>
                  <p>${info.city || 'Δεν υπάρχουν πληροφορίες'}</p>
                </div>
                <div class="form-group">
                  <label class="form-label">Περιγραφή:</label>
                  <p>${info.description || 'Δεν υπάρχει περιγραφή'}</p>
                </div>
                <div class="form-actions">
                  <button class="btn btn-primary" onclick="showCommentsInInfoModal()">Δείτε Σχόλια</button>
                  <button class="btn btn-secondary" onclick="openCoursesPage()">Δες τα μαθήματα</button>
                  <button class="btn btn-secondary" onclick="closeUniversityModal()">Κλείσιμο</button>
                </div>
              </div>
            </div>
          </div>
        `;
        
        // Προσθήκη του modal στο DOM
        const modalContainer = document.createElement('div');
        modalContainer.innerHTML = modalHTML;
        document.body.appendChild(modalContainer);
        
      } catch (error) {
        console.error("Σφάλμα φόρτωσης πληροφοριών πανεπιστημίου:", error);
        alert("Δεν ήταν δυνατή η φόρτωση των πληροφοριών για το πανεπιστήμιο.");
      }
    }

    function closeUniversityModal() {
      const modal = document.getElementById('universityModalOverlay');
      if (modal) {
        modal.remove();
      }
    }

    // Συναρτήσεις για το Forum - Τώρα χρησιμοποιούν τα πραγματικά endpoints
    async function loadForumPosts() {
      try {
        const response = await fetch('/api/forumPosts');
        
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        
        const posts = await response.json();
        displayForumPosts(posts);
      } catch (error) {
        console.error("Σφάλμα φόρτωσης forum posts:", error);
        document.getElementById("forumContainer").innerHTML = "<p>Σφάλμα φόρτωσης forum posts.</p>";
      }
    }

    function displayForumPosts(posts) {
      const forumContainer = document.getElementById("forumContainer");
      let html = '';
      
      if (posts.length === 0) {
        html = '<p>Δεν υπάρχουν ερωτήσεις ακόμα.</p>';
      } else {
        posts.forEach(post => {
          html += `
            <div class="forum-post" id="post-${post.id}">
              <div class="post-header">
                <div class="post-author">
                  <div class="post-avatar">${post.username ? post.username.charAt(0) : 'U'}</div>
                  <div>
                    <strong>${post.username || 'Άγνωστος χρήστης'}</strong>
                    <div style="font-size: 0.8rem; color: var(--gray);">${new Date(post.timestamp).toLocaleDateString('el-GR')}</div>
                  </div>
                </div>
              </div>
              <h3 class="post-title">${post.title || 'Χωρίς τίτλο'}</h3>
              <p>${post.body || post.experience || 'Χωρίς περιεχόμενο'}</p>
              <div class="post-actions">
                <button class="action-btn" onclick="toggleLikePost(${post.id})">
                  <i class="fas fa-thumbs-up"></i> ${post.likeCount || 0}
                </button>
                <button class="action-btn" onclick="toggleReplyForm(${post.id})">
                  <i class="fas fa-reply"></i> Απάντηση
                </button>
              </div>
              <div class="reply-form" id="reply-form-${post.id}" style="display:none;">
                <textarea class="form-control" id="reply-text-${post.id}" rows="3" placeholder="Γράψτε την απάντησή σας..."></textarea>
                <div class="form-actions" style="margin-top: 1rem;">
                  <button class="btn btn-primary" onclick="submitForumReply(${post.id})">Υποβολή Απάντησης</button>
                </div>
              </div>
              <div class="replies" id="replies-${post.id}">
          `;
          
          if (post.replies && post.replies.length > 0) {
            post.replies.forEach(reply => {
              html += `
                <div class="reply-item">
                  <div class="post-author">
                    <div class="post-avatar" style="width: 30px; height: 30px; font-size: 0.8rem;">${reply.username ? reply.username.charAt(0) : 'U'}</div>
                    <div>
                      <strong>${reply.username || 'Άγνωστος χρήστης'}</strong>
                      <div style="font-size: 0.8rem; color: var(--gray);">${new Date(reply.timestamp).toLocaleDateString('el-GR')}</div>
                    </div>
                  </div>
                  <p style="margin-top: 0.5rem;">${reply.reply || reply.body || 'Χωρίς περιεχόμενο'}</p>
                </div>
              `;
            });
          }
          
          html += `</div></div>`;
        });
      }
      
      forumContainer.innerHTML = html;
    }

    function toggleReplyForm(postId) {
      const form = document.getElementById("reply-form-" + postId);
      if (form.style.display === "none" || form.style.display === "") {
        form.style.display = "block";
      } else {
        form.style.display = "none";
      }
    }

    async function submitForumQuestion() {
      const title = document.getElementById("questionTitle").value;
      const body = document.getElementById("questionBody").value;
      
      if (!title || !body) {
        alert("Παρακαλώ συμπληρώστε τίτλο και περιεχόμενο της ερώτησης.");
        return;
      }
      
      const data = { 
        type: 'question', 
        title: title, 
        body: body 
      };
      
      try {
        const response = await fetch('/api/forumPosts', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            [csrfHeader]: csrfToken
          },
          body: JSON.stringify(data)
        });
        
        if (response.ok) {
          alert("Η ερώτησή σας καταχωρήθηκε επιτυχώς.");
          closeQuestionModal();
          showForum();
        } else {
          alert("Παρουσιάστηκε σφάλμα κατά την καταχώρηση της ερώτησης.");
        }
      } catch (error) {
        console.error("Σφάλμα κατά την υποβολή της ερώτησης:", error);
        alert("Σφάλμα κατά την υποβολή της ερώτησης.");
      }
    }

    async function submitForumReply(postId) {
      const replyText = document.getElementById("reply-text-" + postId).value;
      
      if (!replyText) {
        alert("Παρακαλώ συμπληρώστε την απάντησή σας.");
        return;
      }
      
      const data = {
        postId: postId,
        reply: replyText
      };

      try {
        const response = await fetch("/forum/reply/add", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            [csrfHeader]: csrfToken
          },
          body: JSON.stringify(data)
        });

        if (response.ok) {
          document.getElementById("reply-text-" + postId).value = "";
          toggleReplyForm(postId);
          showForum();
          alert("Η απάντησή σας καταχωρήθηκε επιτυχώς!");
        } else {
          alert("Παρουσιάστηκε σφάλμα κατά την υποβολή της απάντησης.");
        }
      } catch (error) {
        console.error("Error:", error);
        alert("Παρουσιάστηκε σφάλμα κατά την υποβολή της απάντησης.");
      }
    }

    async function submitForumPost() {
      const department = document.getElementById('forumDepartment').value;
      const university = document.getElementById('forumUniversity').value;
      const experience = document.getElementById('forumExperience').value;
      
      if (!department || !university || !experience) {
        alert("Παρακαλώ συμπληρώστε όλα τα πεδία.");
        return;
      }
      
      const data = { 
        type: 'experience', 
        department: department, 
        university: university, 
        experience: experience 
      };
      
      try {
        const response = await fetch('/api/forumPosts', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            [csrfHeader]: csrfToken
          },
          body: JSON.stringify(data)
        });
        
        if (response.ok) {
          alert("Η εμπειρία σας καταχωρήθηκε επιτυχώς!");
          closeForumModal();
          showForum();
        } else {
          alert("Παρουσιάστηκε σφάλμα κατά την καταχώρηση.");
        }
      } catch (error) {
        console.error(error);
        alert("Σφάλμα κατά την αποστολή της εμπειρίας.");
      }
    }

    async function submitExperience() {
      const experienceText = document.getElementById("experienceText").value;
      
      if (!experienceText) {
        alert("Παρακαλώ συμπληρώστε την εμπειρία σας.");
        return;
      }
      
      const data = { 
        type: 'experience', 
        department: '', 
        university: '', 
        experience: experienceText 
      };
      
      try {
        const response = await fetch('/api/forumPosts', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            [csrfHeader]: csrfToken
          },
          body: JSON.stringify(data)
        });
        
        if (response.ok) {
          alert("Η εμπειρία σας καταχωρήθηκε επιτυχώς!");
          closeExperienceModal();
          showForum();
        } else {
          alert("Παρουσιάστηκε σφάλμα κατά την καταχώρηση της εμπειρίας.");
        }
      } catch (error) {
        console.error(error);
        alert("Σφάλμα κατά την αποστολή της εμπειρίας.");
      }
    }

    async function toggleLikePost(postId) {
      try {
        const response = await fetch(`/forum/like?postId=${postId}`, {
          method: 'POST',
          headers: { [csrfHeader]: csrfToken }
        });
        
        if (response.ok) {
          showForum(); // Ανανέωση για να δείξει το νέο like count
        } else {
          alert('Παρουσιάστηκε σφάλμα κατά το Like.');
        }
      } catch (error) {
        console.error(error);
        alert('Αποτυχία σύνδεσης για το Like.');
      }
    }

    async function loadHomeComments() {
      try {
        const response = await fetch('/api/forumPosts');
        
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        
        const posts = await response.json();
        displayHomeComments(posts);
      } catch (error) {
        console.error("Σφάλμα φόρτωσης σχολίων:", error);
        document.getElementById("studentComments").innerHTML = '<p>Σφάλμα φόρτωσης σχολίων.</p>';
      }
    }

    function displayHomeComments(posts) {
      const studentComments = document.getElementById("studentComments");
      let html = '';
      
      // Εμφάνιση των 3 πιο πρόσφατων posts
      const recentPosts = posts.slice(0, 3);
      
      if (recentPosts.length === 0) {
        html = '<p>Δεν υπάρχουν σχόλια ακόμη.</p>';
      } else {
        recentPosts.forEach(post => {
          html += `
            <div class="forum-post">
              <div class="post-header">
                <div class="post-author">
                  <div class="post-avatar">${post.username ? post.username.charAt(0) : 'U'}</div>
                  <div>
                    <strong>${post.username || 'Άγνωστος χρήστης'}</strong>
                    <div style="font-size: 0.8rem; color: var(--gray);">${new Date(post.timestamp).toLocaleDateString('el-GR')}</div>
                  </div>
                </div>
              </div>
              <h4 class="post-title">${post.title || 'Εμπειρία Erasmus'}</h4>
              <p>${post.body || post.experience || 'Χωρίς περιεχόμενο'}</p>
            </div>
          `;
        });
      }
      
      studentComments.innerHTML = html;
    }

    // Βοηθητικές συναρτήσεις
    function showCommentsInInfoModal() {
      alert("Σύντομα θα εμφανιστούν τα σχόλια για το πανεπιστήμιο: " + selectedUniversity);
      // Εδώ θα πρέπει να καλείται το αντίστοιχο endpoint για τα σχόλια
    }

    function openCoursesPage() {
      window.location.href = "/courses?university=" + encodeURIComponent(selectedUniversity);
    }

    function saveProfile() {
      const firstName = document.getElementById("profileFirstName").value;
      const lastName = document.getElementById("profileLastName").value;
      const department = document.getElementById("profileDepartment").value;
      const year = document.getElementById("profileYear").value;
      
      alert("Το προφίλ σας αποθηκεύτηκε επιτυχώς!\n\nΌνομα: " + firstName + "\nΕπίθετο: " + lastName + "\nΤμήμα: " + department + "\nΈτος Φοίτησης: " + year);
      closeProfileModal();
    }

    function redirectToDeclarations() {
      alert("Σύντομα θα μεταφερθείτε στις δηλώσεις σας.");
      // window.location.href = "/declarations";
    }

    function redirectToSettings() {
      alert("Σύντομα θα μεταφερθείτε στις ρυθμίσεις.");
      // window.location.href = "/settings";
    }

    function signOut() {
      if (confirm("Είστε σίγουρος ότι θέλετε να αποσυνδεθείτε;")) {
        window.location.href = "/login";
      }
    }
  </script>
</body>
</html>